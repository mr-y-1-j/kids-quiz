<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚­ãƒƒã‚ºãƒ¯ãƒ¼ãƒ«ãƒ‰ - çŸ¥è‚²ã‚¢ãƒ—ãƒª</title>
    <style>
        /* --- ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š --- */
        :root {
            --bg-color: #E0F7FA;
            --card-bg: #ffffff;
            --text-color: #333333;
            --accent-quiz: #2196F3;
            --accent-gallery: #9C27B0;
            --accent-manga: #FF9800;
            --accent-game: #4CAF50;
            --accent-home: #607D8B;
        }

        body {
            font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 10px;
            text-align: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        #top-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: white; padding: 10px 20px; border-radius: 30px;
            margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        #banana-display { font-size: 20px; font-weight: bold; color: #FBC02D; }

        /* ç”»é¢åˆ‡ã‚Šæ›¿ãˆ */
        .screen { display: none; animation: fadeIn 0.3s ease; padding-bottom: 50px; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ã‚«ãƒ¼ãƒ‰ã¨ç”»åƒ */
        .card {
            background: var(--card-bg); border-radius: 20px; padding: 20px;
            margin: 10px auto; max-width: 500px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .content-image {
            max-width: 100%; height: auto; max-height: 250px;
            border-radius: 10px; margin-bottom: 15px; object-fit: contain;
        }

        /* ãƒœã‚¿ãƒ³ */
        .btn {
            display: block; width: 95%; max-width: 350px; margin: 12px auto;
            padding: 18px; font-size: 20px; font-weight: bold;
            border: none; border-radius: 20px; color: white; cursor: pointer;
            box-shadow: 0 6px 0 rgba(0,0,0,0.2); transition: 0.1s;
        }
        .btn:active { transform: translateY(6px); box-shadow: none; }
        
        .btn-quiz { background: var(--accent-quiz); }
        .btn-gallery { background: var(--accent-gallery); }
        .btn-manga { background: var(--accent-manga); }
        .btn-game { background: var(--accent-game); }
        .btn-home { background: var(--accent-home); }

        /* ãƒ†ã‚­ã‚¹ãƒˆé¡ */
        h2 { color: #444; margin-bottom: 20px; }
        .question-text { font-size: 22px; font-weight: bold; margin: 15px 0; }
        .explanation-text { 
            font-size: 18px; text-align: left; line-height: 1.6; 
            background: #fff8e1; padding: 15px; border-radius: 10px; margin-top: 10px;
        }
        .result-mark { font-size: 32px; font-weight: bold; margin-bottom: 10px; }
        
        /* å¹ãå‡ºã—ï¼ˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒ»ãƒãƒ³ã‚¬ç”¨ï¼‰ */
        .bubble {
            position: relative; background: #fff; border: 3px solid #333;
            border-radius: 15px; padding: 15px; margin: 10px auto;
            width: 85%; font-weight: bold; text-align: left;
        }

        /* ãƒãƒ³ã‚¬ç”¨ãƒŠãƒ“ */
        .manga-nav { display: flex; justify-content: space-between; margin-top: 10px; }
        .manga-nav .btn { width: 45%; margin: 0; padding: 10px; }

    </style>
</head>
<body>

    <div id="top-bar">
        <div id="user-info">ğŸ§’ ã‚­ãƒƒã‚ºãƒ¢ãƒ¼ãƒ‰</div>
        <div id="banana-display">ğŸŒ ãƒãƒŠãƒŠ: <span id="banana-count">0</span></div>
    </div>

    <div id="screen-menu" class="screen active">
        <h1>ãªã«ã§ã‚ãã¶ï¼Ÿ</h1>
        <button class="btn btn-quiz" onclick="showScreen('screen-quiz-menu')">â“ ã‚¯ã‚¤ã‚º</button>
        <button class="btn btn-gallery" onclick="showScreen('screen-gallery-menu')">ğŸ–¼ï¸ ãšã‹ã‚“ (ã‚®ãƒ£ãƒ©ãƒªãƒ¼)</button>
        <button class="btn btn-manga" onclick="showMangaList()">ğŸ“– ã¾ã‚“ãŒ</button>
        <button class="btn btn-game" onclick="showScreen('screen-game-menu')">ğŸ® ã‚²ãƒ¼ãƒ </button>
        <div style="margin-top:30px;"><small onclick="resetData()">ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</small></div>
    </div>

    <div id="screen-quiz-menu" class="screen">
        <h2>ã©ã®ã‚¯ã‚¤ã‚ºï¼Ÿ</h2>
        <button class="btn btn-quiz" onclick="startQuiz('planet')">ğŸª ã‚ãã›ã„</button>
        <button class="btn btn-quiz" onclick="startQuiz('clock')">ğŸ•’ ã¨ã‘ã„</button>
        <button class="btn btn-quiz" onclick="startQuiz('kanji')">ğŸ“– ã“ã¨ã°ãƒ»ã‹ã‚“ã˜</button>
        <button class="btn btn-quiz" onclick="startQuiz('team')">âš½ ã‚¹ãƒãƒ¼ãƒ„</button>
        <button class="btn btn-quiz" onclick="startQuiz('body_food')">ğŸ› ãŸã¹ã‚‚ã®ãƒ»ã‹ã‚‰ã </button>
        <button class="btn btn-home" onclick="showScreen('screen-menu')">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="screen-gallery-menu" class="screen">
        <h2>ãªã«ã‚’ã¿ã‚‹ï¼Ÿ</h2>
        <button class="btn btn-gallery" onclick="startGallery('space')">ğŸš€ ã†ã¡ã‚…ã†</button>
        <button class="btn btn-gallery" onclick="startGallery('body')">ğŸ¦´ ã‹ã‚‰ã </button>
        <button class="btn btn-gallery" onclick="startGallery('vehicle')">ğŸš… ã®ã‚Šã‚‚ã®</button>
        <button class="btn btn-gallery" onclick="startGallery('art')">ğŸ¨ ã‚ã„ãŒ</button>
        <button class="btn btn-home" onclick="showScreen('screen-menu')">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="screen-manga-menu" class="screen">
        <h2>ã¾ã‚“ãŒã‚’ ã‚ˆã‚€</h2>
        <div id="manga-list-area"></div>
        <button class="btn btn-home" onclick="showScreen('screen-menu')">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="screen-game-menu" class="screen">
        <h2>ã©ã®ã‚²ãƒ¼ãƒ ï¼Ÿ</h2>
        <button class="btn btn-game" onclick="alert('ã˜ã‚…ã‚“ã³ä¸­ï¼')">ğŸ¹ ã‚‚ãã‚‰ãŸãŸã</button>
        <button class="btn btn-home" onclick="showScreen('screen-menu')">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="screen-content" class="screen">
        <h2 id="content-title">ã‚¿ã‚¤ãƒˆãƒ«</h2>
        <div id="content-area">
            </div>
    </div>

    <script>
        // --- ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ¼ã‚¿ ---
        const appData = {
            // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
            quiz: {
                planet: [
                    { title: "ã‚ãã›ã„", text: "ãŸã„ã‚ˆã†ã« ã„ã¡ã°ã‚“ ã¡ã‹ã„ ã»ã—ã¯ï¼Ÿ", img: "images/mercury.jpg", options: ["ã™ã„ã›ã„", "ã¡ãã‚…ã†", "ã‹ã›ã„"], ans: "ã™ã„ã›ã„", explanation: "ã™ã„ã›ã„ã¯ å¤ªé™½ã® ã™ããã°ã ã‚ˆã€‚ã¨ã£ã¦ã‚‚ ã‚ã¤ã„ï¼" },
                    { title: "ã‚ãã›ã„", text: "ãŸã„ã‚ˆã†(èµ¤) ã¨ ã¡ãã‚…ã†(é’)ã€‚ã©ã£ã¡ãŒ ãŠãŠãã„ï¼Ÿ", img: "images/compare_sun.jpg", options: ["ãŸã„ã‚ˆã†", "ã¡ãã‚…ã†"], ans: "ãŸã„ã‚ˆã†", explanation: "ãŸã„ã‚ˆã†ã¯ åœ°çƒãŒ109ã“ã‚‚ ãªã‚‰ã¶ãã‚‰ã„ ãŠãŠãã„ã‚“ã ã‚ˆï¼" }
                ],
                clock: [
                    { title: "ã¨ã‘ã„", text: "ã¿ã˜ã‹ã„ ã¯ã‚ŠãŒ ã€Œï¼“ã€ã«ã‚ã‚‹ã‚ˆã€‚ãªã‚“ã˜ã‹ãªï¼Ÿ", img: "images/clock_3.jpg", options: ["ï¼‘ã˜", "ï¼“ã˜", "ï¼–ã˜"], ans: "ï¼“ã˜", explanation: "ã¿ã˜ã‹ã„ ã¯ã‚Šã® ã™ã†ã˜ã‚’ ã‚ˆã‚“ã§ã¿ã¦ã­ã€‚" },
                    { title: "ã¨ã‘ã„", text: "ãŠã‚„ã¤ã® ã˜ã‹ã‚“ã¯ ãªã‚“ã˜ã‹ãªï¼Ÿ", img: "images/clock_3.jpg", options: ["ï¼“ã˜", "ï¼‘ï¼ã˜", "ï¼‘ï¼’ã˜"], ans: "ï¼“ã˜", explanation: "ï¼“ã˜ã¯ ãŠã‚„ã¤ã® ã˜ã‹ã‚“ï¼" }
                ],
                kanji: [
                    { title: "ã‹ã‚“ã˜", text: "ã€Œå±±ã€ãªã‚“ã¦ ã‚ˆã‚€ã‹ãªï¼Ÿ", img: "images/kanji_yama.png", options: ["ã†ã¿", "ã‚„ã¾", "ã‹ã‚"], ans: "ã‚„ã¾", explanation: "ã‚„ã¾ã® ã‹ãŸã¡ã‹ã‚‰ ã§ããŸ ã‹ã‚“ã˜ã ã‚ˆã€‚" },
                    { title: "ã‹ã‚“ã˜", text: "ã€Œå£ã€ã©ã“ã‚’ ã‚ã‚‰ã‚ã—ã¦ã„ã‚‹ï¼Ÿ", img: "images/kanji_kuchi.png", options: ["ã¿ã¿", "ãã¡", "ã‚"], ans: "ãã¡", explanation: "ãŸã¹ã‚‚ã®ã‚’ ãŸã¹ã‚‹ ãã¡ã® ã‹ãŸã¡ã ã‚ˆã€‚" }
                ],
                team: [
                    { title: "ã‚¹ãƒãƒ¼ãƒ„", text: "ã‚µãƒƒã‚«ãƒ¼ã¯ ï¼‘ãƒãƒ¼ãƒ  ãªã‚“ã«ã‚“ï¼Ÿ", img: "images/soccer.jpg", options: ["ï¼™ã«ã‚“", "ï¼‘ï¼‘ã«ã‚“", "ï¼•ã«ã‚“"], ans: "ï¼‘ï¼‘ã«ã‚“", explanation: "ã¿ã‚“ãªã§ ï¼‘ï¼‘ã«ã‚“ï¼ åŠ›ã‚’ ã‚ã‚ã›ã¦ ã‚´ãƒ¼ãƒ«ã‚’ ã‚ã–ã™ã‚ˆã€‚" },
                    { title: "ã‚¹ãƒãƒ¼ãƒ„", text: "ã‚„ãã‚…ã†ã¯ ï¼‘ãƒãƒ¼ãƒ  ãªã‚“ã«ã‚“ï¼Ÿ", img: "images/baseball.jpg", options: ["ï¼™ã«ã‚“", "ï¼‘ï¼‘ã«ã‚“", "ï¼“ã«ã‚“"], ans: "ï¼™ã«ã‚“", explanation: "ã‚„ãã‚…ã†ã¯ ï¼™ã«ã‚“ã§ ã‚ãã¶ ã‚¹ãƒãƒ¼ãƒ„ã ã‚ˆã€‚" }
                ],
                body_food: [
                    { title: "ã‚Šã‚‡ã†ã‚Š", text: "ã‚«ãƒ¬ãƒ¼ã« ã„ã‚Œãªã„ã‚‚ã®ã¯ï¼Ÿ", img: "images/curry.jpg", options: ["ã˜ã‚ƒãŒã„ã‚‚", "ã«ã‚“ã˜ã‚“", "ã„ã¡ã”"], ans: "ã„ã¡ã”", explanation: "ã„ã¡ã”ã¯ ãƒ‡ã‚¶ãƒ¼ãƒˆã ã­ï¼" },
                    { title: "ã‹ã‚‰ã ", text: "ãŸã¹ã‚‚ã®ã‚’ ãƒ‰ãƒ­ãƒ‰ãƒ­ã« ã¨ã‹ã™ã®ã¯ï¼Ÿ", img: "images/stomach.jpg", options: ["ã„ï¼ˆèƒƒï¼‰", "ã¯ãª", "ã‚ã—"], ans: "ã„ï¼ˆèƒƒï¼‰", explanation: "ã€Œã„ã€ãŒ ãŸã¹ã‚‚ã®ã‚’ ã—ã‚‡ã†ã‹ ã™ã‚‹ã‚ˆã€‚" }
                ]
            },
            // ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿
            gallery: {
                space: [
                    { title: "ã©ã›ã„", img: "images/gal_saturn.jpg", desc: "ã¾ã‚ã‚Šã® ã‚ã£ã‹ãŒ ãã‚Œã„ã ã­ã€‚ã“ãŠã‚Šã‚„ ã„ã—ã§ ã§ãã¦ã„ã‚‹ã‚ˆã€‚" },
                    { title: "ã¡ãã‚…ã†", img: "images/gal_earth.jpg", desc: "ã‚ãŠã„ ã†ã¿ã¨ ã—ã‚ã„ ãã‚‚ã€‚ã‚ãŸã—ãŸã¡ãŒ ã™ã‚“ã§ã„ã‚‹ ã»ã—ã ã‚ˆã€‚" }
                ],
                body: [
                    { title: "ã»ã­ï¼ˆã“ã£ã‹ãï¼‰", img: "images/gal_bones.jpg", desc: "ã‹ã‚‰ã ã® ãªã‹ã«ã¯ ã»ã­ãŒ ãŸãã•ã‚“ï¼" },
                    { title: "ã¯ï¼ˆæ­¯ï¼‰", img: "images/gal_teeth.jpg", desc: "ãŸã¹ã‚‚ã®ã‚’ ã‹ã¿ãã ãã‚ˆã€‚ã¯ã¿ãŒã ã—ã‚ˆã†ã­ï¼" }
                ],
                vehicle: [
                    { title: "ãƒªãƒ‹ã‚¢ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚«ãƒ¼", img: "images/gal_maglev.jpg", desc: "ã˜ã—ã‚ƒãã® ã¡ã‹ã‚‰ã§ ã†ã„ã¦ ã¯ã—ã‚‹ã‚ˆï¼" },
                    { title: "ãƒ­ã‚±ãƒƒãƒˆ", img: "images/gal_rocket.jpg", desc: "ã†ã¡ã‚…ã†ã¸ ã„ããŸã‚ã® ã®ã‚Šã‚‚ã®ã€‚ã™ã”ã„ ç«ã‚’ ã ã—ã¦ ã¨ã¶ã‚ˆï¼" }
                ],
                art: [
                    { title: "ãƒ¢ãƒŠãƒ»ãƒªã‚¶", img: "images/gal_monalisa.jpg", desc: "ã‚ãŸã—ã€ã¾ã‚†ã’ãŒ ãªã„ã®ã€‚ãµã—ãã§ã—ã‚‡ï¼Ÿ" },
                    { title: "ã²ã¾ã‚ã‚Š", img: "images/gal_sunflower.jpg", desc: "ã‚´ãƒƒãƒ›ã•ã‚“ãŒ ã‹ã„ãŸ ãˆã ã‚ˆã€‚ãã„ã‚ãŒ å…ƒæ°—ã‚’ ãã‚Œã‚‹ã­ï¼" }
                ]
            },
            // ãƒãƒ³ã‚¬ãƒ‡ãƒ¼ã‚¿
            manga: [
                { id: "muscle", title: "ãƒ ã‚­ãƒ ã‚­ã« ãªã‚Œã‚‹ï¼Ÿ", pages: ["images/manga_muscle_1.jpg"] },
                { id: "poop", title: "ã†ã‚“ã¡ã¯ ã©ã“ã‹ã‚‰ï¼Ÿ", pages: ["images/manga_poop_1.jpg"] }
            ]
        };

        // --- çŠ¶æ…‹ç®¡ç†å¤‰æ•° ---
        let bananas = parseInt(localStorage.getItem('kidsBananas')) || 0;
        let currentMode = ""; // 'quiz', 'gallery', 'manga'
        let currentGenre = "";
        let currentIdx = 0;

        // --- åˆæœŸåŒ– ---
        document.getElementById('banana-count').innerText = bananas;
        
        // --- å…±é€šé–¢æ•° ---
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function resetData() {
            if(confirm('ãƒãƒŠãƒŠã‚’ ï¼ã« ã‚‚ã©ã—ã¦ã‚‚ ã„ã„ã§ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('kidsBananas');
                location.reload();
            }
        }

        // ============================
        //  ã‚¯ã‚¤ã‚ºæ©Ÿèƒ½
        // ============================
        function startQuiz(genre) {
            currentMode = "quiz";
            currentGenre = genre;
            currentIdx = 0;
            quizLoop();
        }

        function quizLoop() {
            showScreen('screen-content');
            const q = appData.quiz[currentGenre][currentIdx];
            document.getElementById('content-title').innerText = q.title;
            
            let html = `
                <div class="card">
                    <img src="${q.img}" class="content-image" onerror="this.src='https://placehold.jp/24/cccccc/ffffff/300x200.png?text=ãŒãã†ã˜ã‚…ã‚“ã³ã¡ã‚…ã†'">
                    <p class="question-text">${q.text}</p>
                    ${q.options.map(opt => `<button class="btn btn-quiz" onclick="checkAnswer('${opt}')">${opt}</button>`).join('')}
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;
        }

        function checkAnswer(selected) {
            const q = appData.quiz[currentGenre][currentIdx];
            const isCorrect = (selected === q.ans);
            
            if(isCorrect) {
                bananas++;
                localStorage.setItem('kidsBananas', bananas);
                document.getElementById('banana-count').innerText = bananas;
            }

            let html = `
                <div class="card">
                    <div class="result-mark" style="color:${isCorrect ? '#4CAF50':'#F44336'}">${isCorrect ? 'â­•ï¸ ã›ã„ã‹ã„ï¼' : 'âŒ ãŠã—ã„ï¼'}</div>
                    <div class="explanation-text">${q.explanation}</div>
                    <button class="btn btn-game" onclick="nextContent()">ã¤ãã¸</button>
                    <button class="btn btn-home" onclick="showScreen('screen-menu')">ã‚„ã‚ã‚‹</button>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;
        }

        // ============================
        //  ã‚®ãƒ£ãƒ©ãƒªãƒ¼æ©Ÿèƒ½
        // ============================
        function startGallery(genre) {
            currentMode = "gallery";
            currentGenre = genre;
            currentIdx = 0;
            galleryLoop();
        }

        function galleryLoop() {
            showScreen('screen-content');
            const item = appData.gallery[currentGenre][currentIdx];
            document.getElementById('content-title').innerText = item.title;

            let html = `
                <div class="card">
                    <img src="${item.img}" class="content-image" onerror="this.src='https://placehold.jp/24/cccccc/ffffff/300x200.png?text=ãŒãã†ã˜ã‚…ã‚“ã³ã¡ã‚…ã†'">
                    <div class="bubble">${item.desc}</div>
                    <button class="btn btn-gallery" onclick="nextContent()">ã¤ãã‚’ ã¿ã‚‹ â¡</button>
                    <button class="btn btn-home" onclick="showScreen('screen-gallery-menu')">ã‚‚ã©ã‚‹</button>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;
        }

        // ============================
        //  ãƒãƒ³ã‚¬æ©Ÿèƒ½
        // ============================
        function showMangaList() {
            showScreen('screen-manga-menu');
            const area = document.getElementById('manga-list-area');
            area.innerHTML = "";
            appData.manga.forEach((m, idx) => {
                area.innerHTML += `<button class="btn btn-manga" onclick="startManga(${idx})">${m.title}</button>`;
            });
        }

        function startManga(mangaIdx) {
            currentMode = "manga";
            currentGenre = mangaIdx; // ã“ã“ã§ã¯é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ã—ã¦ä½¿ç”¨
            currentIdx = 0; // ãƒšãƒ¼ã‚¸æ•°
            mangaLoop();
        }

        function mangaLoop() {
            showScreen('screen-content');
            const manga = appData.manga[currentGenre];
            const pageImg = manga.pages[currentIdx];
            document.getElementById('content-title').innerText = manga.title;

            let html = `
                <div class="card">
                    <img src="${pageImg}" class="content-image" onerror="this.src='https://placehold.jp/24/cccccc/ffffff/300x400.png?text=ãƒãƒ³ã‚¬ã˜ã‚…ã‚“ã³ã¡ã‚…ã†'">
                    <div class="manga-nav">
                        <button class="btn btn-home" onclick="showMangaList()" style="width:100%">ã‚‚ã©ã‚‹</button>
                        </div>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;
        }

        // ============================
        //  å…±é€šï¼šæ¬¡ã¸é€²ã‚€å‡¦ç†
        // ============================
        function nextContent() {
            currentIdx++;
            
            if(currentMode === "quiz") {
                if(currentIdx < appData.quiz[currentGenre].length) {
                    quizLoop();
                } else {
                    alert("ãœã‚“ã¶ã‚¯ãƒªã‚¢ï¼ã™ã”ã„ã­ï¼");
                    showScreen('screen-menu');
                }
            } else if (currentMode === "gallery") {
                if(currentIdx < appData.gallery[currentGenre].length) {
                    galleryLoop();
                } else {
                    if(confirm("ãœã‚“ã¶ ã¿ãŸã‚ˆï¼ æœ€åˆã«ã‚‚ã©ã‚‹ï¼Ÿ")) {
                        currentIdx = 0;
                        galleryLoop();
                    } else {
                        showScreen('screen-gallery-menu');
                    }
                }
            }
        }
    </script>
</body>
</html>
