<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚­ãƒƒã‚ºãƒ¯ãƒ¼ãƒ«ãƒ‰</title>
    <style>
        /* --- å…±é€šãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        body {
            font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background-color: #E0F7FA; /* æ˜ã‚‹ã„ç©ºè‰² */
            text-align: center;
            margin: 0;
            padding: 10px;
            user-select: none;
            color: #333;
        }
        
        /* ç”»é¢ç®¡ç† */
        .screen { display: none; padding-bottom: 50px;}
        .active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ãƒãƒŠãƒŠã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ */
        #top-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: #FFF; padding: 10px 20px; border-radius: 30px;
            margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        #banana-display { font-size: 20px; font-weight: bold; color: #FBC02D; }

        /* ãƒœã‚¿ãƒ³å…±é€š */
        .btn {
            display: block; width: 95%; max-width: 350px; margin: 15px auto;
            padding: 18px; font-size: 20px; font-weight: bold;
            border: none; border-radius: 20px; cursor: pointer; color: white;
            box-shadow: 0 6px 0 rgba(0,0,0,0.2); transition: transform 0.1s;
        }
        .btn:active { transform: translateY(6px); box-shadow: none; }
        .btn-home { background: #FF7043; } /* èµ¤ï¼šæˆ»ã‚‹ */
        
        /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³è‰²åˆ†ã‘ */
        .btn-game { background: #4CAF50; }  /* ç·‘ */
        .btn-quiz { background: #2196F3; }  /* é’ */
        .btn-gallery { background: #9C27B0; } /* ç´« */
        .btn-manga { background: #FF9800; } /* ã‚ªãƒ¬ãƒ³ã‚¸ */

        /* --- ã‚¯ã‚¤ã‚ºç”»é¢ç”¨ --- */
        #quiz-area {
            background: white; border-radius: 20px; padding: 20px;
            margin: 10px auto; max-width: 500px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        #question-image-area {
            min-height: 150px; display: flex; align-items: center; justify-content: center;
            margin-bottom: 20px; overflow: hidden; border-radius: 10px; background: #f9f9f9;
        }
        img.q-img { max-width: 100%; max-height: 250px; }

        /* æƒ‘æ˜Ÿã‚µã‚¤ã‚ºæ¯”è¼ƒç”¨ã®å††æç”»ã‚¨ãƒªã‚¢ */
        .planet-comparison {
            display: flex; align-items: flex-end; justify-content: center; gap: 20px;
            height: 150px; width: 100%;
        }
        .planet-circle {
            border-radius: 50%; display: inline-block;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }

        /* éŸ³æ¥½å†ç”Ÿãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é¢¨ */
        .music-player {
            background: #333; color: white; padding: 20px; border-radius: 15px; width: 80%;
        }
        .play-icon { font-size: 40px; }

        /* --- ã‚®ãƒ£ãƒ©ãƒªãƒ¼ç”¨ --- */
        .gallery-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
        }
        .gallery-item {
            background: white; border-radius: 15px; overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer;
        }
        .gallery-item img { width: 100%; height: 100px; object-fit: cover; }
        .gallery-title { padding: 5px; font-size: 14px; font-weight: bold; }

    </style>
</head>
<body>

    <div id="top-bar">
        <div id="user-name">ã‚²ã‚¹ãƒˆ</div>
        <div id="banana-display">ğŸŒ <span id="banana-count">0</span></div>
    </div>

    <div id="screen-menu" class="screen active">
        <h1>ãªã«ã‚’ã—ã¦ã‚ãã¶ï¼Ÿ</h1>
        <button class="btn btn-quiz" onclick="showGenreSelect()">â“ ã‚¯ã‚¤ã‚º</button>
        <button class="btn btn-gallery" onclick="showGalleryList()">ğŸ–¼ï¸ ãšã‹ã‚“ (ã‚®ãƒ£ãƒ©ãƒªãƒ¼)</button>
        <button class="btn btn-game" onclick="alert('ã“ã“ã¯ã‚²ãƒ¼ãƒ ç”»é¢ï¼ãƒ¢ã‚°ãƒ©ãŸãŸããªã©ã‚’å®Ÿè£…äºˆå®š')">ğŸ® ã‚²ãƒ¼ãƒ </button>
        <button class="btn btn-manga" onclick="alert('ã“ã“ã¯ãƒãƒ³ã‚¬ç”»é¢ï¼')">ğŸ“– ã¾ã‚“ãŒ</button>
        <div style="margin-top:30px;">
            <small onclick="resetData()" style="color:#aaa;">ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ</small>
        </div>
    </div>

    <div id="screen-genre" class="screen">
        <h2>ã©ã®ã‚¯ã‚¤ã‚ºï¼Ÿ</h2>
        <button class="btn btn-quiz" onclick="startQuiz('planet')">ğŸª ã‚ãã›ã„ãƒ»ã†ã¡ã‚…ã†</button>
        <button class="btn btn-quiz" onclick="startQuiz('music')">ğŸµ ãŠã‚“ãŒã</button>
        <button class="btn btn-quiz" onclick="startQuiz('flag')">ğŸ ã“ã£ã</button>
        <button class="btn btn-home" onclick="goHome()">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="screen-quiz-main" class="screen">
        <h2 id="q-text">ã‚‚ã‚“ã ã„</h2>
        
        <div id="quiz-area">
            <div id="visual-content"></div>
        </div>

        <div id="options-area">
            </div>
        <button class="btn btn-home" onclick="goHome()" style="margin-top:20px; width:150px; font-size:16px;">ã‚„ã‚ã‚‹</button>
    </div>

    <div id="screen-gallery" class="screen">
        <h2>ãšã‹ã‚“</h2>
        <div class="gallery-grid" id="gallery-container">
            </div>
        <button class="btn btn-home" onclick="goHome()">ğŸ  ã‚‚ã©ã‚‹</button>
    </div>

    <div id="overlay-feedback" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.95); z-index:100; align-items:center; justify-content:center; flex-direction:column;">
        <div style="font-size:80px;" id="fb-icon">â­•</div>
        <h2 id="fb-text" style="color:#E91E63; font-size:30px;">ã›ã„ã‹ã„ï¼</h2>
        <p id="fb-comment" style="font-size:18px; padding:0 20px;"></p>
        <button class="btn btn-quiz" onclick="nextQuestion()">ã¤ãã¸ â¡</button>
    </div>

<script>
    // --- ãƒ‡ãƒ¼ã‚¿ç¾¤ ---

    // 1. ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
    const quizData = {
        planet: [
            {
                type: "order", // ä¸¦ã³é †ã‚¯ã‚¤ã‚º
                text: "ãŸã„ã‚ˆã†ã« ã„ã¡ã°ã‚“ ã¡ã‹ã„ ã»ã—ã¯ï¼Ÿ",
                image: "https://images-assets.nasa.gov/image/PIA03153/PIA03153~orig.jpg", // NASAã®æ°´æ˜Ÿç”»åƒ(ãƒ€ãƒŸãƒ¼URLã¨ã—ã¦æ©Ÿèƒ½)
                options: ["ã™ã„ã›ã„ (Mercury)", "ã¡ãã‚…ã† (Earth)", "ã‹ã›ã„ (Mars)"],
                answer: "ã™ã„ã›ã„ (Mercury)",
                comment: "ãŸã„ã‚ˆã†ã® ã™ãã¨ãªã‚Šï¼ ã¨ã£ã¦ã‚‚ã‚ã¤ã„ã‚ˆã€‚"
            },
            {
                type: "size-compare", // ã€æ–°æ©Ÿèƒ½ã€‘å¤§ãã•æ¯”è¼ƒ
                text: "ãŸã„ã‚ˆã†(èµ¤) ã¨ ã¡ãã‚…ã†(é’)ã€ãŸã ã—ã„ ãŠãŠãã•ã¯ ã©ã£ã¡ï¼Ÿ",
                // sizeData: [å¤ªé™½ã®å¤§ãã•, åœ°çƒã®å¤§ãã•] ã®æ¯”ç‡
                optionsData: [
                    { label: "A", sun: 100, earth: 50 }, // é–“é•ã„ï¼ˆå·®ãŒå°ã•ã„ï¼‰
                    { label: "B", sun: 150, earth: 5 }   // æ­£è§£ï¼ˆåœ§å€’çš„ãªå·®ï¼‰
                ],
                options: ["A", "B"],
                answer: "B",
                comment: "ãŸã„ã‚ˆã†ã¯ ã¨ã£ã¦ã‚‚ãŠãŠãã„ï¼ ã¡ãã‚…ã†ã®109ã°ã„ã‚‚ã‚ã‚‹ã‚“ã ã‚ˆã€‚"
            }
        ],
        music: [
            {
                type: "audio", // ã€æ–°æ©Ÿèƒ½ã€‘éŸ³æ¥½ã‚¯ã‚¤ã‚º
                text: "ã“ã® ãã‚‡ãã® ãªã¾ãˆã¯ï¼Ÿ",
                // ãƒ•ãƒªãƒ¼éŸ³æºã¸ã®ãƒªãƒ³ã‚¯ (ä¾‹: ã‚¯ãƒ©ã‚·ãƒƒã‚¯åæ›²ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰)
                audioSrc: "https://upload.wikimedia.org/wikipedia/commons/e/e0/Beethoven_-_Symphony_No._5_-_1._Allegro_con_brio.ogg", 
                options: ["ã†ã‚“ã‚ã„", "ãã‚‰ãã‚‰ã¼ã—", "ã‚¢ãƒ³ãƒ‘ãƒ³ãƒãƒ³"],
                answer: "ã†ã‚“ã‚ã„",
                comment: "ãƒ™ãƒ¼ãƒˆãƒ¼ãƒ™ãƒ³ã®ã€Œã†ã‚“ã‚ã„ã€ã€‚ã‚¸ãƒ£ã‚¸ãƒ£ã‚¸ãƒ£ã‚¸ãƒ£ãƒ¼ãƒ³ï¼"
            }
        ],
        flag: [
            { type: "image", text: "ã“ã‚Œã¯ ã©ã“ã® ãã«ï¼Ÿ", image: "https://upload.wikimedia.org/wikipedia/en/9/9e/Flag_of_Japan.svg", options: ["ã«ã»ã‚“", "ã‚¢ãƒ¡ãƒªã‚«", "ãƒ•ãƒ©ãƒ³ã‚¹"], answer: "ã«ã»ã‚“", comment: "ã‚ã‹ã„ã¾ã‚‹ã¯ã€ãŸã„ã‚ˆã† ã ã‚ˆã€‚" }
        ]
    };

    // 2. ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿
    const galleryItems = [
        { title: "ã¡ãã‚…ã†", img: "https://images-assets.nasa.gov/image/PIA00114/PIA00114~orig.jpg", desc: "ç§ãŸã¡ãŒä½ã‚“ã§ã„ã‚‹æ˜Ÿã€‚é’ãã¦ãã‚Œã„ã€‚" },
        { title: "ã‹ã›ã„", img: "https://images-assets.nasa.gov/image/PIA02653/PIA02653~orig.jpg", desc: "èµ¤ã„æ˜Ÿã€‚ã„ã¤ã‹äººé–“ãŒä½ã‚ã‚‹ã‹ã‚‚ï¼Ÿ" },
        { title: "ã‚‚ãã›ã„", img: "https://images-assets.nasa.gov/image/PIA02873/PIA02873~orig.jpg", desc: "ä¸€ç•ªå¤§ããªæƒ‘æ˜Ÿã€‚ã‚·ãƒã‚·ãƒæ¨¡æ§˜ãŒã‚ã‚‹ã‚ˆã€‚" }
    ];

    // --- ã‚·ã‚¹ãƒ†ãƒ å¤‰æ•° ---
    let bananas = 0;
    let currentQuizList = [];
    let currentQIndex = 0;

    // --- åˆæœŸåŒ– ---
    window.onload = function() {
        const saved = localStorage.getItem('kidsAppBananas');
        if(saved) bananas = parseInt(saved);
        updateBananas();
    };

    function updateBananas() {
        document.getElementById('banana-count').innerText = bananas;
        localStorage.setItem('kidsAppBananas', bananas);
    }

    function resetData() {
        if(confirm("ãƒ‡ãƒ¼ã‚¿ã‚’ã‘ã—ã¾ã™ã‹ï¼Ÿ")) {
            localStorage.clear();
            location.reload();
        }
    }

    // --- ç”»é¢é·ç§» ---
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.getElementById('overlay-feedback').style.display = 'none'; // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚‚æ¶ˆã™
    }
    function goHome() { showScreen('screen-menu'); }
    function showGenreSelect() { showScreen('screen-genre'); }

    // --- ã‚¯ã‚¤ã‚ºæ©Ÿèƒ½ ---
    function startQuiz(genre) {
        currentQuizList = quizData[genre];
        currentQIndex = 0;
        if(!currentQuizList || currentQuizList.length === 0) {
            alert("ã¾ã  ã‚‚ã‚“ã ã„ãŒãªã„ã‚ˆï¼");
            return;
        }
        showQuestion();
    }

    function showQuestion() {
        showScreen('screen-quiz-main');
        const q = currentQuizList[currentQIndex];
        const visualArea = document.getElementById('visual-content');
        const optionsArea = document.getElementById('options-area');
        
        document.getElementById('q-text').innerText = q.text;
        visualArea.innerHTML = "";
        optionsArea.innerHTML = "";

        // 1. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æç”»ï¼ˆã‚¿ã‚¤ãƒ—åˆ¥ï¼‰
        if (q.type === "size-compare") {
            // æƒ‘æ˜Ÿã‚µã‚¤ã‚ºæ¯”è¼ƒï¼ˆCanvas/CSSã§å††ã‚’æç”»ï¼‰
            let html = "";
            q.optionsData.forEach(opt => {
                html += `
                <div style="margin-bottom:20px; border:2px solid #ddd; padding:10px; border-radius:10px;">
                    <h3>${opt.label}</h3>
                    <div class="planet-comparison">
                        <div class="planet-circle" style="width:${opt.sun}px; height:${opt.sun}px; background:#FF5722;"></div> <div class="planet-circle" style="width:${opt.earth}px; height:${opt.earth}px; background:#2196F3;"></div> </div>
                </div>`;
            });
            visualArea.innerHTML = html;

        } else if (q.type === "audio") {
            // éŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
            visualArea.innerHTML = `
                <div class="music-player" style="margin:0 auto;">
                    <div class="play-icon">â–¶ï¸</div>
                    <p>ãŠã¨ã‚’ ãã„ã¦ã­</p>
                    <audio id="quiz-audio" controls src="${q.audioSrc}"></audio>
                </div>
            `;
            // è‡ªå‹•å†ç”Ÿã¯ãƒ–ãƒ©ã‚¦ã‚¶åˆ¶é™ãŒã‚ã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ä»»ã›ã‚‹ã‹ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§å†ç”Ÿ

        } else {
            // é€šå¸¸ç”»åƒ (NASAç”»åƒãªã©)
            if(q.image) {
                visualArea.innerHTML = `<img src="${q.image}" class="q-img" alt="quiz image">`;
            }
        }

        // 2. é¸æŠè‚¢ãƒœã‚¿ãƒ³ã®ç”Ÿæˆ
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "btn btn-quiz";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt);
            optionsArea.appendChild(btn);
        });
    }

    function checkAnswer(selected) {
        const q = currentQuizList[currentQIndex];
        const isCorrect = (selected === q.answer);
        const overlay = document.getElementById('overlay-feedback');
        
        if (isCorrect) {
            document.getElementById('fb-icon').innerText = "ğŸŒ"; // æ­£è§£ãªã‚‰ãƒãƒŠãƒŠ
            document.getElementById('fb-text').innerText = "ã›ã„ã‹ã„ï¼";
            bananas++;
            updateBananas();
            // ã“ã“ã§æ­£è§£éŸ³ã‚’é³´ã‚‰ã™
        } else {
            document.getElementById('fb-icon').innerText = "ğŸ˜¢";
            document.getElementById('fb-text').innerText = "ã–ã‚“ã­ã‚“...";
        }

        document.getElementById('fb-comment').innerText = q.comment || "";
        overlay.style.display = "flex";
    }

    function nextQuestion() {
        currentQIndex++;
        if (currentQIndex < currentQuizList.length) {
            showQuestion();
        } else {
            alert("ã‚¯ãƒªã‚¢ï¼ ã™ã”ã„ã­ï¼");
            goHome();
        }
    }

    // --- ã‚®ãƒ£ãƒ©ãƒªãƒ¼æ©Ÿèƒ½ ---
    function showGalleryList() {
        showScreen('screen-gallery');
        const container = document.getElementById('gallery-container');
        container.innerHTML = "";
        
        galleryItems.forEach(item => {
            const div = document.createElement('div');
            div.className = "gallery-item";
            div.innerHTML = `
                <img src="${item.img}" alt="${item.title}">
                <div class="gallery-title">${item.title}</div>
            `;
            div.onclick = () => {
                // ã‚¿ãƒƒãƒ—ã§è§£èª¬ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆæœ¬ç•ªã¯è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ã¸ï¼‰
                alert(`ã€${item.title}ã€‘\n${item.desc}`);
            };
            container.appendChild(div);
        });
    }

</script>
</body>
</html>